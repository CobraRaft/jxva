<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>jxva Bot</title>
  <link rel="icon" href="assets/favicon.ico" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
    * {margin:0;padding:0;box-sizing:border-box;}
    body {
      background: radial-gradient(circle at top, #11111a, #0a0a0f);
      color: #fff;
      font-family: 'Poppins', sans-serif;
      overflow-x: hidden;
      scroll-behavior: smooth;
    }

    /* Navbar */
    .navbar {
      width: 100%;
      position: fixed;
      top: 0;
      left: 0;
      padding: 18px 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      backdrop-filter: blur(12px);
      background: rgba(10,10,15,0.55);
      border-bottom: 1px solid rgba(255,255,255,0.05);
      z-index: 100;
    }
    .logo {
      font-size: 1.6rem;
      font-weight: 700;
      color: #FFFA63;
      text-shadow: 0 0 8px rgba(255,245,139,0.5);
    }
    .nav-links {
      display:flex;align-items:center;gap:22px;
    }
    .nav-links a {
      color:#fff;text-decoration:none;font-weight:600;
      transition:color .2s,transform .2s;
    }
    .nav-links a:hover {color:#FFFA63;transform:scale(1.05);}
    .login-btn {
      background: linear-gradient(135deg,#FFFA63,#f8e473);
      color:#0a0a0f;padding:9px 20px;border-radius:8px;
      font-weight:600;text-decoration:none;
      transition:transform .25s,box-shadow .25s;
    }
    .login-btn:hover {transform:scale(1.05);box-shadow:0 0 15px rgba(255,245,139,0.4);}
    .user-info {display:flex;align-items:center;gap:8px;}
    .user-info img {width:28px;height:28px;border-radius:50%;}

    section {
      min-height: 100vh;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      text-align:center;
      padding: 140px 20px 100px; /* top padding prevents overlap */
    }

    h1 {
      font-size:3.2rem;color:#FFFA63;
      text-shadow:0 0 15px rgba(255,245,139,0.4);
      margin-bottom:0.4rem;
    }
    p {color:#bdbdbd;max-width:600px;margin-bottom:2rem;}

    .button {
      text-decoration:none;
      background:linear-gradient(135deg,#5865f2,#7289da);
      color:white;padding:14px 36px;border-radius:12px;
      font-weight:600;font-size:1.1rem;
      transition:transform .2s,box-shadow .2s;
    }
    .button:hover {transform:scale(1.05);box-shadow:0 0 20px rgba(88,101,242,.5);}

    .commands {
      display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
      gap:20px;margin-top:30px;width:80%;max-width:900px;
    }
    .command-card {
      background:rgba(255,255,255,.05);
      padding:20px;border-radius:12px;
      transition:transform .2s,box-shadow .2s;
    }
    .command-card:hover {transform:scale(1.05);box-shadow:0 0 15px rgba(255,255,255,.1);}
    .command-card h3 {color:#FFFA63;margin-bottom:10px;}

    .support a {
      color:#5865f2;text-decoration:none;font-weight:600;
    }
    .support a:hover {color:#7289da;}

    footer {text-align:center;color:#777;font-size:0.9rem;padding:30px;}
  </style>
</head>
<body>
  <nav class="navbar" id="navbar">
    <div class="logo">jxva</div>
    <div class="nav-links">
      <a href="#home">Home</a>
      <a href="#commands">Commands</a>
      <a href="#support">Support</a>
      <a class="login-btn" id="loginBtn">Login</a>
    </div>
  </nav>

  <section id="home">
    <h1>jxva</h1>
    <p>Meet <strong>jxva</strong> â€” a Discord bot by <strong>@neporrex_</strong>.</p>
    <a class="button" href="invite.html">Invite jxva</a>
  </section>

  <section id="commands">
    <h2>âœ¨ Commands</h2>
    <div class="commands">
      <div class="command-card"><h3>/ban</h3><p>Bans a user from the server.</p></div>
      <div class="command-card"><h3>/kick</h3><p>Kicks a user from the server.</p></div>
      <div class="command-card"><h3>/ping</h3><p>Shows latency.</p></div>
      <div class="command-card"><h3>/help</h3><p>Shows all commands.</p></div>
    </div>
  </section>

  <section id="support" class="support">
    <h2>ðŸ’¬ Support</h2>
    <p>Need help or want to suggest something? Join our community.</p>
    <a href="https://discord.gg/E4e5v7pznG" target="_blank">Join Support Server</a>
  </section>

  <footer>Â© 2025 jxva â€” Made by @Neporrex Ã— Vercel.</footer>

  <script>
    const clientId = "1425450445140393994";
    const redirectUri = "https://jxva.vercel.app";
    const loginUrl = `https://discord.com/oauth2/authorize?client_id=${clientId}&response_type=code&redirect_uri=${encodeURIComponent(redirectUri)}&scope=identify+guilds`;
    const loginBtn = document.getElementById("loginBtn");
    const params = new URLSearchParams(window.location.search);
    const code = params.get("code");

    async function handleAuth() {
      if (code) {
        // remove hash fragments to fix #support issue
        const cleanUrl = window.location.origin + window.location.pathname;
        window.history.replaceState({}, document.title, cleanUrl);
        try {
          const res = await fetch(`/api/auth?code=${code}`);
          const data = await res.json();
          if (data.id) {
            localStorage.setItem("jxvaUser", JSON.stringify(data));
            renderNavbar(data);
          } else {
            console.warn("OAuth response invalid:", data);
            renderNavbar(null);
          }
        } catch (err) {
          console.error("Login failed", err);
          renderNavbar(null);
        }
      } else {
        const user = JSON.parse(localStorage.getItem("jxvaUser") || "null");
        renderNavbar(user);
      }
    }

    function renderNavbar(user) {
      const navbar = document.getElementById("navbar");
      if (user) {
        navbar.innerHTML = `
          <div class="logo">jxva</div>
          <div class="nav-links">
            <a href="#home">Home</a>
            <a href="#commands">Commands</a>
            <a href="#support">Support</a>
            <div class="user-info">
              <img src="https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png" alt="pfp" onerror="this.src='https://cdn.discordapp.com/embed/avatars/0.png'">
              <span>${user.username}</span>
              <a class="login-btn" href="dashboard.html">Dashboard</a>
              <button id="logoutBtn" style="background:none;border:none;color:#FFFA63;cursor:pointer;font-weight:600;">Logout</button>
            </div>
          </div>`;
        document.getElementById("logoutBtn").onclick = () => {
          localStorage.removeItem("jxvaUser");
          location.reload();
        };
      } else {
        navbar.querySelector("#loginBtn").onclick = () => window.location.href = loginUrl;
      }
    }

    handleAuth();
  </script>
</body>
</html>
